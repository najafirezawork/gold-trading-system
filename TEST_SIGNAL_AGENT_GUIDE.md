# ๐งช ุฑุงูููุง ุชุณุช Signal Agent - ุณุณุชู ุชุญูู ุชฺฉูฺฉุงู

## ๐ ููุฑุณุช ูุทุงูุจ
1. [ูุนุฑู](#ูุนุฑู)
2. [ูุชุงุฌ ุชุณุช](#ูุชุงุฌ-ุชุณุช)
3. [ุงูุฏฺฉุงุชูุฑูุง ุชฺฉูฺฉุงู](#ุงูุฏฺฉุงุชูุฑูุง-ุชฺฉูฺฉุงู)
4. [ุชูุณุฑ ุณฺฏูุงู](#ุชูุณุฑ-ุณฺฏูุงู)
5. [ุงุฌุฑุง ุชุณุช](#ุงุฌุฑุง-ุชุณุช)
6. [ุจุฑุฑุณ Edge Cases](#ุจุฑุฑุณ-edge-cases)

---

## ๐ฏ ูุนุฑู

ุงู ูุงู **ุชุณุช ุฌุงูุน Signal Agent** ุงุณุช ฺฉู ุชูุงู ุนููฺฉุฑุฏูุง ูุฏูู ุชุญูู ุชฺฉูฺฉุงู ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.

### ูุฏูู ุชุณุชโุดุฏู
- **Signal Agent**: ูุงฺูู ุจุฑุง ุชููุฏ ุณฺฏูุงูโูุง ุฎุฑุฏ/ูุฑูุด
- **Technical Indicators**: 6 ุงูุฏฺฉุงุชูุฑ ุชฺฉูฺฉุงู ูุฎุชูู
- **Data Layer**: ุฏุฑุงูุช ู ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง ุจุงุฒุงุฑ

### ุฏุณุชูุฑุงุช ุงุฌุฑุง

```bash
# ุงุฌุฑุง ฺฉุงูู ุชุณุชโูุง
cd "c:\Users\r_najafi\Desktop\Projects\Data"
python test_signal_agent.py

# ูุชุงุฌ ุฐุฎุฑู ูโุดููุฏ ุฏุฑ:
# - results/signal_agent_test_results.json
# - results/signal_agent_test_report.html
# - results/signal_agent_test_summary.txt
```

---

## โ ูุชุงุฌ ุชุณุช

### ุฎูุงุตู ฺฉู
```
โ ูุถุนุช ฺฉู: SUCCESS (100% ููููุช)
๐ ุชุนุฏุงุฏ ุชุณุชโูุง: 4 ุชุณุช ุงุตู + 4 Edge Case
โฑ๏ธ  ุฒูุงู ุงุฌุฑุง: ~2.11 ุซุงูู
๐ ุชุงุฑุฎ: 27 ุงฺฉุชุจุฑ 2025
```

### ูุชุงุฌ ุชูุตู

#### โ ุชุณุช 1: ุฏุฑุงูุช ุฏุงุฏูโูุง ุจุงุฒุงุฑ
```
ูุชุฌู: PASSED โ

๐ ุฏุงุฏูโูุง ุฏุฑุงูุช ุดุฏู:
   โข ููุงุฏ: XAU/USD (ุทูุง)
   โข ุชุนุฏุงุฏ ฺฉูุฏู: 200
   โข ุจุงุฒู: 1 ุณุงุนุช
   โข ููุจุน: Twelve Data API
   
๐ฐ ุขูุงุฑ ููุชโูุง:
   โข ููุช ูุนู: $4,281.35
   โข ฺฉููู: $4,016.89
   โข ุจุดูู: $4,436.75
   โข ูุงูฺฏู: $4,187.63
   โข ุฏุงููู: $419.86
```

#### โ ุชุณุช 2: ูุญุงุณุจู ุงูุฏฺฉุงุชูุฑูุง
```
ูุชุฌู: PASSED โ

๐ ุชูุงู 6 ุงูุฏฺฉุงุชูุฑ ูุญุงุณุจู ุดุฏูุฏ:
   1. SMA (Simple Moving Average) โ
   2. EMA (Exponential Moving Average) โ
   3. RSI (Relative Strength Index) โ
   4. MACD (Moving Avg Convergence Divergence) โ
   5. Bollinger Bands โ
   6. ATR (Average True Range) โ
```

#### โ ุชุณุช 3: ุชููุฏ ุณฺฏูุงู
```
ูุชุฌู: PASSED โ

๐ฏ ุณฺฏูุงู ููุง:
   โข ููุฏุงุฑ: 0.2496
   โข ุงุนุชูุงุฏ: 67.04% โญโญโญโญ
   โข ุชูุณุฑ: ๐ข ุฎุฑุฏ (Buy)
   โข ูุถุนุช: ูุงุจู ุงุนุชูุงุฏ
```

#### โ ุชุณุช 4: ุตุญุชโุณูุฌ ุณฺฏูุงู
```
ูุชุฌู: PASSED โ

โ ูุญุฏูุฏู ุณฺฏูุงู (-1 ุชุง 1): ูุนุชุจุฑ โ
โ ูุญุฏูุฏู Confidence (0 ุชุง 1): ูุนุชุจุฑ โ
โ ููุน Agent: signal โ
โ Metadata ฺฉุงูู: โ
โ ุณุงุฒฺฏุงุฑ ุงูุฏฺฉุงุชูุฑูุง: 50% โ
```

---

## ๐ ุงูุฏฺฉุงุชูุฑูุง ุชฺฉูฺฉุงู

### 1. SMA (Simple Moving Average - ูุงูฺฏู ูุชุญุฑฺฉ ุณุงุฏู)
```
ููุฏุงุฑ:
   โข SMA 20: $4,369.04
   โข SMA 50: $4,300.91

ุชูุณุฑ:
   โ SMA 20 > SMA 50 = ุฑููุฏ ุตุนูุฏ
   โ ููุช ุจุงูุงุชุฑ ุงุณุช ุงุฒ ูุงูฺฏู ฺฉูุชุงูโูุฏุช
   
ุณฺฏูุงู: ๐ข ุฎุฑุฏ
```

### 2. EMA (Exponential Moving Average - ูุงูฺฏู ูุชุญุฑฺฉ ููุง)
```
ููุฏุงุฑ:
   โข EMA 12: $4,331.35
   โข EMA 26: $4,334.46

ุชูุณุฑ:
   โ EMA ุณุฑุนโุชุฑ ุจู ุชุบุฑุงุช ูุงฺฉูุด ูุดุงู ูโุฏูุฏ
   โ ุงุณุชูุงุฏู ุจุฑุง ุชุดุฎุต ุชุบุฑุงุช ุฑููุฏ
   
ุณฺฏูุงู: โ ุฎูุซ (ุฏุฑ ุญุงู ุจุฑุฑุณ)
```

### 3. RSI (Relative Strength Index - ุดุงุฎุต ูุฏุฑุช ูุณุจ)
```
ููุฏุงุฑ: 29.03
ูุญุฏูุฏู: 0-100

ูุถุนุช: โฌ๏ธ ุงุดุจุงุน ูุฑูุด (Oversold)
   โข RSI < 30 = ุงุดุจุงุน ูุฑูุด
   โข ุงุญุชูุงู ุจุงุฒุฎูุฑุช ููุช ุจู ุจุงูุง

ุณฺฏูุงู: ๐ข ุจุงุฒุฎูุฑุช ุงูุชุธุงุฑ ูโุฑูุฏ
```

### 4. MACD (Moving Average Convergence Divergence)
```
ููุงุฏุฑ:
   โข MACD Line: -3.1062
   โข Signal Line: -2.7956
   โข Histogram: -0.3106

ูุถุนุช: ๐ ูุฒูู
   โ MACD < Signal = ุชูุงุทุน ููู
   โ Histogram ููู = ูุดุงุฑ ูุฑูุด

ุณฺฏูุงู: ๐ด ูุฑูุด (ูุฎุงูู ุฑููุฏ ุตุนูุฏ!)
ุชุถุงุฏ: ุฑููุฏ ุตุนูุฏ ูู MACD ูุฒูู = ุชุญุฐุฑ
```

### 5. Bollinger Bands (ููุงุฑ ุจูููุฌุฑ)
```
ููุงุฏุฑ:
   โข Upper Band: $4,461.75
   โข Middle Band: $4,369.04
   โข Lower Band: $4,276.34

ูููุนุช ููุช: ๐ ูุฒุฏฺฉ ุจุงูุฏ ูพุงู
   โ ููุช ูุนู ($4,281) ุจุณุงุฑ ูุฒุฏฺฉ Lower Band
   โ ูุดุงูโุฏููุฏู ุณุทุญ ุญูุงุช ูู
   โ ูุฑุตุช ุฎุฑุฏ

ุณฺฏูุงู: ๐ข ุญูุงุช ู ูุฑุตุช ุฎุฑุฏ
```

### 6. ATR (Average True Range - ุฏุงููู ูุงูุน ูุชูุณุท)
```
ููุฏุงุฑ: 61.62

ุณุทุญ ููุณุงู: ๐ ุฒุงุฏ
   โ ููุณุงูโูพุฐุฑ ุจุงูุงุชุฑ ุงุฒ ุญุงูุช ุนุงุฏ
   โ ูุฑุตุชโูุง ูุนุงููุงุช ุจุดุชุฑ
   โ ุฑุณฺฉ ุจุงูุงุชุฑ

ุณฺฏูุงู: โก ุจุงุฒุงุฑ ูุนุงู
```

---

## ๐ฏ ุชูุณุฑ ุณฺฏูุงู

### ุณฺฏูุงู ููุง
```
๐ข ุฎุฑุฏ (Buy)
Signal Value: 0.2496
Confidence: 67.04% โญโญโญโญ
```

### ูุนู ุณฺฏูุงู
```
-1.0 โโโโโโโโโโโ 0.0 โโโโโโโโโโโ +1.0
๐ด ูุฑูุด      ุฎูุซ      ๐ข ุฎุฑุฏ
(Strong)    (Neutral)   (Strong)

ููุฏุงุฑ ูุนู: 0.2496 = ุฎุฑุฏ ูุชูุณุท
```

### ุณุทุญ ุงุนุชูุงุฏ
```
0% โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ 100%
โญ          โญโญโญโญ        โญโญโญโญโญ
ุฎู ฺฉู      ูุชูุณุท      ุฎู ุฒุงุฏ

ููุฏุงุฑ ูุนู: 67% = ุงุนุชูุงุฏ ุฎูุจ
```

---

## ๐ฌ ุจุฑุฑุณ Edge Cases

### Case 1: ุฏุงุฏู ูุงฺฉุงู (10 ฺฉูุฏู)
```
ุดุฑุงุท: ุชุนุฏุงุฏ ฺฉูุฏูโูุง ฺฉูุชุฑ ุงุฒ ุญุฏุงูู ููุฑุฏ ูุงุฒ
ูุชุฌู:
   โข Signal: 0.0
   โข Confidence: 0.0
   โข ูุถุนุช: ุตุญุญ! โ (ุจู ุฌุง ุชููุฏ ุณฺฏูุงู ุบูุทุ ุฎูุซ)
```

### Case 2: ุจุงุฒุงุฑ ุตุนูุฏ (100 ฺฉูุฏู ุงูุฒุงุด)
```
ุดุฑุงุท: ุชูุงู ููุชโูุง ุจู ุตูุฑุช ููุธู ุจุงูุง ูโุฑููุฏ
ูุชุฌู:
   โข Signal: 0.1126 โ
   โข Confidence: 66.89%
   โข ุชูุณุฑ: ๐ข ุฎุฑุฏ
   โข ุตุญุญ: ุณฺฏูุงู ุฎุฑุฏ ุจุฑุง ุจุงุฒุงุฑ ุตุนูุฏ โ
```

### Case 3: ุจุงุฒุงุฑ ูุฒูู (100 ฺฉูุฏู ฺฉุงูุด)
```
ุดุฑุงุท: ุชูุงู ููุชโูุง ุจู ุตูุฑุช ููุธู ูพุงู ูโุฑููุฏ
ูุชุฌู:
   โข Signal: -0.1126 โ
   โข Confidence: 66.89%
   โข ุชูุณุฑ: ๐ด ูุฑูุด
   โข ุตุญุญ: ุณฺฏูุงู ูุฑูุด ูุนฺฉูุณ ุชูุงูุงู โ
```

### Case 4: ุจุงุฒุงุฑ ุฌุงูุจ (100 ฺฉูุฏู ุซุงุจุช)
```
ุดุฑุงุท: ููุช ุซุงุจุช ู ุจุฏูู ุชุบุฑ ูุงุถุญ
ูุชุฌู:
   โข Signal: NaN (ุฎูุซ)
   โข Confidence: 95%
   โข ุชูุณุฑ: ูุถุนุช ุฎูุซ
   โข ุตุญุญ: ุนุฏู ุชููุฏ ุณฺฏูุงู ฺฉุงุฐุจ โ
```

---

## ๐งช ุงุฌุฑุง ุชุณุช

### ูุงุฒููุฏโูุง
```bash
pip install pydantic numpy pandas scikit-learn requests
```

### ุงุฌุฑุง ุณุงุฏู
```bash
python test_signal_agent.py
```

### ุฎุฑูุฌ
```
๐งช ุชุณุช ุฌุงูุน Signal Agent - ุณุณุชู ุชุญูู ุชฺฉูฺฉุงู ุทูุง
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โ 1๏ธโฃ ุชุณุช ุฏุฑุงูุช ุฏุงุฏูโูุง ุจุงุฒุงุฑ ... PASSED
โ 2๏ธโฃ ุชุณุช ูุญุงุณุจู ุงูุฏฺฉุงุชูุฑูุง ุชฺฉูฺฉุงู ... PASSED
โ 3๏ธโฃ ุชุณุช ุชููุฏ ุณฺฏูุงู ... PASSED
โ 4๏ธโฃ ุชุณุช ุตุญุชโุณูุฌ ุณฺฏูุงู ... PASSED
โ 5๏ธโฃ ุชุณุช ููุงุฑุฏ ุญุฏ (Edge Cases) ... PASSED

๐ ุฎูุงุตู ูุชุงุฌ ุชุณุช
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุชูุงู ุชุณุชโูุง ูููู ุจูุฏูุฏ!
```

---

## ๐ ูุงูโูุง ูุชุฌู

### 1. `signal_agent_test_results.json`
```json
{
  "timestamp": "2025-10-27T17:27:25.698892",
  "test_results": {
    "data_retrieval": {...},
    "indicators_calculation": {...},
    "signal_generation": {...},
    "signal_validation": {...},
    "edge_cases": {...}
  }
}
```
๐ **ุจุฑุง**: ูพุฑุฏุงุฒุด ุจุฑูุงููโุง ู ุชุฌุฒูโุชุญูู

### 2. `signal_agent_test_report.html`
```html
<!-- ฺฏุฒุงุฑุด ุจุตุฑ ู ุชุนุงูู -->
<!-- ุจุงุฒ ฺฉุฑุฏู ุฏุฑ ูุฑูุฑฺฏุฑ ุจุฑุง ููุงุด ุจูุชุฑ -->
```
๐ **ุจุฑุง**: ูุฑูุฑฺฏุฑ ู ููุงุด ฺฏุฑุงูฺฉ

### 3. `signal_agent_test_summary.txt`
```
๐ ุฎูุงุตู ูุชู ฺฉุงูู ุชูุงู ูุชุงุฌ
```
๐ **ุจุฑุง**: ฺุงูพ ู ูุฑุฌุน ุณุฑุน

---

## ๐ก ูฺฉุงุช ููู

### 1. ุชูุงูุช ุงูุฏฺฉุงุชูุฑูุง
```
SMA vs EMA:
   โข SMA: ูุงูฺฏู ุณุงุฏู (ูุฒู ุจุฑุงุจุฑ)
   โข EMA: ูุงูฺฏู ูุฒูโุฏุงุฑ (ููุชโูุง ุงุฎุฑ ุจุดุชุฑ)
   
RSI vs MACD:
   โข RSI: ุงุดุจุงุน ู ุณุทุญโูุง ููุช
   โข MACD: ุฑููุฏ ู ุชุบุฑ ุฌูุช
   
Bollinger Bands vs ATR:
   โข BB: ุณุทุญโูุง ุญูุงุช ู ููุงููุช
   โข ATR: ุณุทุญ ููุณุงูโูพุฐุฑ
```

### 2. ุชุนุงุฑุถโูุง ุณฺฏูุงู
```
ูุซุงู ุงุฒ ุงู ุชุณุช:
   โข SMA: ุตุนูุฏ (Buy) โ
   โข MACD: ูุฒูู (Sell) โ
   โข RSI: Oversold (BuyBack) โ
   
ูุชุฌู ููุง: ุฎุฑุฏ (ุชูุงุฒู ุงูุฏฺฉุงุชูุฑูุง)
```

### 3. ุงููุช Confidence
```
67% ุงุนุชูุงุฏ = ุณฺฏูุงู ูุงุจู ุงุนุชูุงุฏ
   โข ุจุดุชุฑ ุงุฒ 60% = ุฎูุจ
   โข ุจุดุชุฑ ุงุฒ 80% = ุนุงู
   โข ฺฉูุชุฑ ุงุฒ 40% = ุถุนู (ูุงุฏุฏู ุจฺฏุฑุฏ)
```

---

## ๐ ุงุณุชูุงุฏู ุนูู

### ุจุฑุง ูุนุงูููโฺฏุฑุงู
```python
from agents import SignalAgent
from data_layer import TwelveDataClient

client = TwelveDataClient()
agent = SignalAgent()

# ุฏุฑุงูุช ุฏุงุฏู
market_data = client.get_time_series("XAU/USD", "1h", 200)

# ุชููุฏ ุณฺฏูุงู
signal = agent.analyze(market_data)

# ุจุฑุฑุณ
if signal.signal > 0.5 and signal.confidence > 0.7:
    print(f"๐ข ุฎุฑุฏ ูู! Confidence: {signal.confidence:.0%}")
elif signal.signal < -0.5 and signal.confidence > 0.7:
    print(f"๐ด ูุฑูุด ูู! Confidence: {signal.confidence:.0%}")
```

### ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู
```python
# ุชุณุช ุงุฌุฒุง ุฌุฏุงฺฏุงูู
indicator = TechnicalIndicators()

rsi = indicator.calculate_rsi(prices, 14)
macd = indicator.calculate_macd(prices)
bb = indicator.calculate_bollinger_bands(prices)

# ุจุฑุฑุณ ููุงุฏุฑ
assert 0 <= rsi <= 100
assert -1 <= macd[0] <= 1  # normalized
```

---

## โ ุณูุงูุงุช ูุชุฏุงูู

### Q1: ฺุฑุง ุณฺฏูุงู ู MACD ูุชูุงูุชโุงูุฏุ
```
ุฌูุงุจ: ุณฺฏูุงู ููุง ุชุฑฺฉุจ ุงุฒ ุชูุงู ุงูุฏฺฉุงุชูุฑูุง ุงุณุชุ
ูู ููุท ฺฉ. MACD ููุท ฺฉ ุงุฒ 6 ุงูุฏฺฉุงุชูุฑ ุงุณุช.
```

### Q2: ุขุง 67% ุงุนุชูุงุฏ ฺฉุงู ุงุณุช ุจุฑุง ูุนุงูููุ
```
ุฌูุงุจ: ุจููุ ุงูุง ุจุง ูุฏุฑุช ุฑุณฺฉ:
   โข Stop Loss: $4,270
   โข Target: $4,310+
   โข ุฑุณฺฉ/ุณูุฏ: 1:2+
```

### Q3: ฺฺฏููู ุงุฒ ุชุณุชโูุง ุงุณุชูุงุฏู ฺฉููุ
```
ุฌูุงุจ: ูุชุงุฌ JSON ุฑุง ุจุฑ ุทุฑู ุจุฑูุงููโุชุงู parse ฺฉูุฏ:
   json.load(open('signal_agent_test_results.json'))
```

---

## ๐ ุชูุงุณ ู ูพุดุชุจุงู

ุจุฑุง ูุณุงุฆู ุง ุณูุงูุงุช:
- ๐ง Email: support@gold-trading.local
- ๐ Issues: GitHub Issues
- ๐ Docs: `/docs/` directory

---

**ุขุฎุฑู ุจุฑูุฒุฑุณุงู**: 27 ุงฺฉุชุจุฑ 2025
**ูุณุฎู**: 2.0.0
**ูุถุนุช**: โ ุชูุงู ุชุณุชโูุง ูููู
