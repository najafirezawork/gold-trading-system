# ğŸ“Š Sequence Diagrams - Gold Trading System

**Version:** 2.1.0  
**Last Updated:** October 28, 2025

This document contains sequence diagrams for key workflows in the Gold Trading System.

## Table of Contents

1. [Signal Generation Flow](#signal-generation-flow)
2. [Full Analysis Pipeline](#full-analysis-pipeline)
3. [Backtesting Workflow](#backtesting-workflow)
4. [API Data Retrieval](#api-data-retrieval)
5. [Error Handling Flow](#error-handling-flow)

---

## Signal Generation Flow

### Basic Signal Agent Analysis

```
â”Œâ”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚        â”‚SignalAgent  â”‚        â”‚ Indicators â”‚        â”‚  AgentOutput â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚  analyze(data)    â”‚                     â”‚                       â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ validate_data()     â”‚                       â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                       â”‚
   â”‚                   â”‚              â”‚      â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ calculate_sma()     â”‚                       â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚      sma_values     â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ calculate_ema()     â”‚                       â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚                   â”‚      ema_values     â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ calculate_rsi()     â”‚                       â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚                   â”‚      rsi_value      â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ calculate_macd()    â”‚                       â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚                   â”‚     macd_values     â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ calculate_bollinger()â”‚                      â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚                   â”‚   bollinger_bands   â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ calculate_atr()     â”‚                       â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚                   â”‚      atr_value      â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ calculate_fibonacci()â”‚                      â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                       â”‚
   â”‚                   â”‚   fibonacci_levels  â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ _generate_signal()  â”‚                       â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                       â”‚
   â”‚                   â”‚              â”‚      â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚ _calculate_confidence()                     â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚                       â”‚
   â”‚                   â”‚              â”‚      â”‚                       â”‚
   â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚                   â”‚      create_output()                        â”‚
   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                   â”‚                     â”‚                       â”‚
   â”‚   AgentOutput     â”‚                     â”‚                       â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                       â”‚
   â”‚                   â”‚                     â”‚                       â”‚
```

---

## Full Analysis Pipeline

### Multi-Agent Analysis Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚   â”‚MetaAgent â”‚   â”‚SignalAgent â”‚   â”‚MLAgent â”‚   â”‚DecisionAgtâ”‚   â”‚RiskAgent â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚ analyze()  â”‚               â”‚              â”‚              â”‚             â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚ get_data()    â”‚              â”‚              â”‚             â”‚
   â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚          â”‚    â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚  analyze(data)â”‚              â”‚              â”‚             â”‚
   â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚ calculate_indicators()      â”‚             â”‚
   â”‚            â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚           â”‚  â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚  SignalOutput â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚  analyze(data)              â”‚             â”‚
   â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚             â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚ engineer_features()        â”‚
   â”‚            â”‚               â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚          â”‚   â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚ model_predict()            â”‚
   â”‚            â”‚               â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚          â”‚   â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚   MLOutput   â”‚              â”‚             â”‚
   â”‚            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚              â”‚             â”‚
   â”‚            â”‚               â”‚              â”‚  analyze([SignalOutput,   â”‚
   â”‚            â”‚               â”‚              â”‚           MLOutput])       â”‚
   â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚              â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚ aggregate() â”‚
   â”‚            â”‚               â”‚              â”‚             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚         â”‚   â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚               â”‚              â”‚  DecisionOutput            â”‚
   â”‚            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚ assess(decision)
   â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚ calculate_position_size()
   â”‚            â”‚               â”‚              â”‚             â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚           â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚   RiskOutput â”‚
   â”‚            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚ create_final_decision()      â”‚             â”‚              â”‚
   â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚          â”‚   â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚
   â”‚  Decision  â”‚               â”‚              â”‚             â”‚              â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚              â”‚             â”‚              â”‚
   â”‚            â”‚               â”‚              â”‚             â”‚              â”‚
```

---

## Backtesting Workflow

### Strategy Backtesting Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚     â”‚BacktestEngine  â”‚     â”‚ Strategy â”‚     â”‚ Metrics â”‚     â”‚ Report  â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚  run_backtest() â”‚                   â”‚               â”‚               â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚ initialize()      â”‚               â”‚               â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”‚               â”‚
   â”‚                 â”‚             â”‚     â”‚               â”‚               â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚ load_historical_data()            â”‚               â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”‚               â”‚
   â”‚                 â”‚             â”‚     â”‚               â”‚               â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—               â”‚
   â”‚                 â”‚ â•‘  Loop: For each candle         â•‘               â”‚
   â”‚                 â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚  on_candle(data)  â”‚               â”‚               â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚ update_indicators()           â”‚
   â”‚                 â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚               â”‚
   â”‚                 â”‚                   â”‚        â”‚      â”‚               â”‚
   â”‚                 â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚  should_buy()?    â”‚               â”‚               â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚      True/False   â”‚               â”‚               â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚            [if True]                â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚ execute_buy()     â”‚               â”‚               â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”‚               â”‚
   â”‚                 â”‚             â”‚     â”‚               â”‚               â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚  should_sell()?   â”‚               â”‚               â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚      True/False   â”‚               â”‚               â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚            [if True]                â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚ execute_sell()    â”‚               â”‚               â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”‚               â”‚
   â”‚                 â”‚             â”‚     â”‚               â”‚               â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚ update_equity()   â”‚               â”‚               â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚               â”‚               â”‚
   â”‚                 â”‚             â”‚     â”‚               â”‚               â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—               â”‚
   â”‚                 â”‚ â•‘  End Loop                      â•‘               â”‚
   â”‚                 â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚  calculate_metrics()          â”‚
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚ compute_sharpe()
   â”‚                 â”‚                   â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
   â”‚                 â”‚                   â”‚               â”‚        â”‚      â”‚
   â”‚                 â”‚                   â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚ compute_drawdown()
   â”‚                 â”‚                   â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
   â”‚                 â”‚                   â”‚               â”‚        â”‚      â”‚
   â”‚                 â”‚                   â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚      Metrics  â”‚               â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚  generate_report()
   â”‚                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚ create_html()
   â”‚                 â”‚                   â”‚               â”‚               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                 â”‚                   â”‚               â”‚               â”‚         â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚        Report â”‚
   â”‚                 â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                 â”‚                   â”‚               â”‚               â”‚
   â”‚  BacktestResult â”‚                   â”‚               â”‚               â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚               â”‚               â”‚
   â”‚                 â”‚                   â”‚               â”‚               â”‚
```

---

## API Data Retrieval

### Twelve Data API Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚        â”‚TwelveDataClientâ”‚        â”‚API Serverâ”‚        â”‚ Validatorâ”‚
â””â”€â”€â”¬â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚ get_time_series()   â”‚                     â”‚                   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                   â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚ check_rate_limit()  â”‚                   â”‚
   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                   â”‚
   â”‚                     â”‚          â”‚          â”‚                   â”‚
   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                   â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚ build_request()     â”‚                   â”‚
   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                   â”‚
   â”‚                     â”‚          â”‚          â”‚                   â”‚
   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                   â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚  HTTP GET /time_series                  â”‚
   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚                     â”‚ process_request() â”‚
   â”‚                     â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
   â”‚                     â”‚                     â”‚          â”‚        â”‚
   â”‚                     â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚  JSON Response      â”‚                   â”‚
   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚ validate_response() â”‚                   â”‚
   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚                     â”‚     validate_schema()
   â”‚                     â”‚                     â”‚                   â”œâ”€â”€â”€â”€â”€â”
   â”‚                     â”‚                     â”‚                   â”‚     â”‚
   â”‚                     â”‚                     â”‚                   â”‚<â”€â”€â”€â”€â”˜
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚                     â”‚     validate_data()
   â”‚                     â”‚                     â”‚                   â”œâ”€â”€â”€â”€â”€â”
   â”‚                     â”‚                     â”‚                   â”‚     â”‚
   â”‚                     â”‚                     â”‚                   â”‚<â”€â”€â”€â”€â”˜
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚                     â”‚       Valid       â”‚
   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚ parse_to_models()   â”‚                   â”‚
   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                   â”‚
   â”‚                     â”‚          â”‚          â”‚                   â”‚
   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                   â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚                     â”‚ cache_data()        â”‚                   â”‚
   â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚                   â”‚
   â”‚                     â”‚          â”‚          â”‚                   â”‚
   â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                   â”‚
   â”‚                     â”‚                     â”‚                   â”‚
   â”‚    MarketData       â”‚                     â”‚                   â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                   â”‚
   â”‚                     â”‚                     â”‚                   â”‚
```

---

## Error Handling Flow

### Comprehensive Error Handling

```
â”Œâ”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Clientâ”‚        â”‚ Agent     â”‚        â”‚ErrorHandlerâ”‚      â”‚Logger      â”‚
â””â”€â”€â”¬â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚  analyze(data)   â”‚                    â”‚                   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚              try {                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚ validate_data()    â”‚                   â”‚
   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                   â”‚
   â”‚                  â”‚          â”‚         â”‚                   â”‚
   â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚ calculate_indicators()                 â”‚
   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                   â”‚
   â”‚                  â”‚          â”‚         â”‚                   â”‚
   â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚ [Error occurs]     â”‚                   â”‚
   â”‚                  â”‚ Exception thrown   â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚              } catch (Error) {        â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚  handle_error(e)   â”‚                   â”‚
   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚ classify_error()  â”‚
   â”‚                  â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
   â”‚                  â”‚                    â”‚          â”‚        â”‚
   â”‚                  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚  [Is Recoverable?]â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
   â”‚                  â”‚                    â”‚ â•‘  Yes          â•‘ â”‚
   â”‚                  â”‚                    â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚ log_warning()     â”‚
   â”‚                  â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚ write_log()
   â”‚                  â”‚                    â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                  â”‚                    â”‚                   â”‚        â”‚
   â”‚                  â”‚                    â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚ retry_operation() â”‚
   â”‚                  â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
   â”‚                  â”‚                    â”‚          â”‚        â”‚
   â”‚                  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
   â”‚                  â”‚                    â”‚ â•‘  Success      â•‘ â”‚
   â”‚                  â”‚                    â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚  Recovery Success  â”‚                   â”‚
   â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚ return_result()    â”‚                   â”‚
   â”‚                  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                   â”‚
   â”‚                  â”‚          â”‚         â”‚                   â”‚
   â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚     Result       â”‚                    â”‚                   â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
   â”‚                  â”‚                    â”‚ â•‘  No           â•‘ â”‚
   â”‚                  â”‚                    â”‚ â•‘(Non-recoverable)â•‘
   â”‚                  â”‚                    â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚ log_error()       â”‚
   â”‚                  â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚ write_error_log()
   â”‚                  â”‚                    â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                  â”‚                    â”‚                   â”‚        â”‚
   â”‚                  â”‚                    â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚ create_fallback() â”‚
   â”‚                  â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
   â”‚                  â”‚                    â”‚          â”‚        â”‚
   â”‚                  â”‚                    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚                  â”‚  Fallback Result   â”‚                   â”‚
   â”‚                  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
   â”‚  FallbackResult  â”‚                    â”‚                   â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚                   â”‚
   â”‚                  â”‚                    â”‚                   â”‚
```

---

## Notes

### Diagram Conventions

- **Solid arrows (â”€>):** Synchronous calls
- **Dashed arrows (-->):** Asynchronous calls
- **Return arrows (<â”€):** Return values
- **Boxes with corners:** Components/Objects
- **Boxes with double lines:** Loops or conditions
- **Self-arrows:** Internal methods

### ASCII Diagram Tools

These diagrams can be edited using:
- **Online:** https://textik.com/
- **VS Code Extension:** ASCII Diagram Draw
- **CLI Tool:** graph-easy (Perl module)

### Mermaid Alternative

For interactive diagrams, consider using Mermaid syntax:

```mermaid
sequenceDiagram
    participant C as Client
    participant SA as SignalAgent
    participant I as Indicators
    
    C->>SA: analyze(data)
    SA->>SA: validate_data()
    SA->>I: calculate_sma()
    I-->>SA: sma_values
    SA->>I: calculate_rsi()
    I-->>SA: rsi_value
    SA->>SA: generate_signal()
    SA-->>C: AgentOutput
```

---

**For updates or corrections to these diagrams, please submit a pull request.**

**License:** MIT License  
**Copyright:** Â© 2025 Gold Trading System Team
