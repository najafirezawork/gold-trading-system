# ğŸ›ï¸ ØªØ­Ù„ÛŒÙ„ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø³ÛŒØ³ØªÙ…

## ğŸ“ Ù†Ù…Ø§ÛŒ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ú©Ù„ÛŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     User Interface Layer                        â”‚
â”‚            (CLI, API, Web Dashboard, Monitoring)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               API/Service Layer (Orchestration)                 â”‚
â”‚  â€¢ main.py - Entry Points                                       â”‚
â”‚  â€¢ Exception Handling                                           â”‚
â”‚  â€¢ Request Validation                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                      â”‚                      â”‚
    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â–¼â”€â”€â”
    â”‚Agents â”‚            â”‚Backtesting â”‚         â”‚Configâ”‚
    â”‚Layer  â”‚            â”‚Engine      â”‚         â”‚Layer â”‚
    â””â”€â”€â”€â”¬â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”¬â”€â”€â”˜
        â”‚                       â”‚                    â”‚
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”´â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                        â”‚       â”‚          â”‚  Settings    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”Œâ”€â”€â–¼â”€â”€â”       â”‚  â€¢ API Key   â”‚
    â”‚  â”‚Meta Agent      â”‚    â”‚   â”‚Stratâ”‚       â”‚  â€¢ Symbols   â”‚
    â”‚  â”‚(Orchestrator)  â”‚    â”‚   â”‚egiesâ”‚       â”‚  â€¢ Parametersâ”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â””â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚   â–²   â–²      â–²   â–²     â”‚
    â”‚   â”‚   â”‚      â”‚   â”‚     â”‚
    â”‚ â”Œâ”€â”´â”€â”¬â”€â”´â”€â”€â”¬â”€â”€â”¬â”´â”€â”¬â”€â”´â”€â”   â”‚
    â”‚ â”‚Sigâ”‚ ML â”‚Deciâ”‚Riskâ”‚   â”‚
    â”‚ â”‚nalâ”‚    â”‚sionâ”‚Mgmtâ”‚   â”‚
    â”‚ â””â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜   â”‚
    â”‚                        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Technical Analysis & ML Layer      â”‚
â”‚  â€¢ 7 Technical Indicators           â”‚
â”‚  â€¢ Feature Engineering (70+)        â”‚
â”‚  â€¢ ML Models (RF, XGBoost, Ens)     â”‚
â”‚  â€¢ Model Training & Prediction      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Data Layer & Caching          â”‚
â”‚  â€¢ Twelve Data API Client          â”‚
â”‚  â€¢ OHLCV Data Models               â”‚
â”‚  â€¢ Validation & Normalization      â”‚
â”‚  â€¢ Caching (in-memory/disk)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      External APIs & Services      â”‚
â”‚  â€¢ Twelve Data API (Real-time)     â”‚
â”‚  â€¢ Potential: Broker APIs          â”‚
â”‚  â€¢ Potential: Alert Services       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Ø¬Ø²Ø¦ÛŒØ§Øª Ù‡Ø± Ù„Ø§ÛŒÙ‡

### 1. Agent Layer

#### BaseAgent (Base Class)
```python
class BaseAgent(ABC):
    â”œâ”€â”€ agent_type: AgentType
    â”œâ”€â”€ name: str
    â”œâ”€â”€ enabled: bool
    â””â”€â”€ analyze(data) â†’ AgentOutput: abstract
```

#### Signal Agent
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Signal Agent (7 Indicators)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Input: MarketData (200 OHLCV)â”‚
â”‚ Process:                     â”‚
â”‚  â”œâ”€ SMA(20,50)             â”‚
â”‚  â”œâ”€ EMA(12,26)             â”‚
â”‚  â”œâ”€ RSI(14)                â”‚
â”‚  â”œâ”€ MACD(12,26,9)          â”‚
â”‚  â”œâ”€ Bollinger(20,2)        â”‚
â”‚  â”œâ”€ ATR(14)                â”‚
â”‚  â””â”€ Fibonacci(H,L)         â”‚
â”‚                             â”‚
â”‚ Output:                      â”‚
â”‚  â”œâ”€ signal: -1 to +1       â”‚
â”‚  â”œâ”€ confidence: 0 to 1     â”‚
â”‚  â””â”€ indicators metadata     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ML Agent
```
70+ Features â†’ Feature Selection â†’ ML Models
    â”‚            â”œâ”€ Select top 20-30
    â”œâ”€ Price      â””â”€ Remove correlated
    â”œâ”€ Moving Avg
    â”œâ”€ Momentum    ML Models:
    â”œâ”€ Volatility  â”œâ”€ RandomForest
    â”œâ”€ Patterns    â”œâ”€ XGBoost
    â””â”€ Support/Res â””â”€ Ensemble

Output:
â”œâ”€ prob_up: 0-1 (Ø§Ø­ØªÙ…Ø§Ù„ ØµØ¹ÙˆØ¯)
â”œâ”€ prob_down: 0-1 (Ø§Ø­ØªÙ…Ø§Ù„ Ù†Ø²ÙˆÙ„)
â”œâ”€ trend_strength: 0-1
â”œâ”€ volatility: 0-1
â””â”€ momentum: -1 to +1
```

#### Decision Agent
```
Inputs from:
â”œâ”€ Signal Agent (signal, confidence)
â”œâ”€ ML Agent (probabilities)
â””â”€ Risk Agent (position size)

Logic:
â”œâ”€ Weight signals: Ïƒáµ¢ = wâ‚›*Sâ‚› + wâ‚˜*Sâ‚˜
â”œâ”€ Aggregate: Î£ = Î£áµ¢ / n
â”œâ”€ Apply thresholds
â”‚   â”œâ”€ > 0.6: STRONG_BUY
â”‚   â”œâ”€ 0.3-0.6: BUY
â”‚   â”œâ”€ -0.3-0.3: HOLD
â”‚   â”œâ”€ -0.6--0.3: SELL
â”‚   â””â”€ < -0.6: STRONG_SELL
â””â”€ Calculate confidence

Output:
â”œâ”€ decision: BUY/SELL/HOLD
â”œâ”€ confidence: 0-1
â””â”€ reasoning: str
```

### 2. Data Layer

#### Client (TwelveDataClient)
```python
class TwelveDataClient:
    â”œâ”€â”€ __init__(api_key)
    â”œâ”€â”€ get_time_series()  # Ø¯Ø±ÛŒØ§ÙØª OHLCV
    â”œâ”€â”€ _validate_response()
    â”œâ”€â”€ _handle_errors()
    â””â”€â”€ __enter__/__exit__  # Context Manager
```

#### Models (Pydantic)
```python
class OHLCV:
    â”œâ”€â”€ datetime: datetime
    â”œâ”€â”€ open: float
    â”œâ”€â”€ high: float
    â”œâ”€â”€ low: float
    â”œâ”€â”€ close: float
    â””â”€â”€ volume: float

class MarketData:
    â”œâ”€â”€ symbol: str
    â”œâ”€â”€ interval: str
    â”œâ”€â”€ data: List[OHLCV]
    â”œâ”€â”€ meta: Optional[dict]
    â””â”€â”€ __len__(), to_dict()
```

### 3. Technical Indicators

#### TechnicalIndicators Class
```python
class TechnicalIndicators:
    @staticmethod
    â”œâ”€â”€ calculate_sma(prices, period)
    â”œâ”€â”€ calculate_ema(prices, period)
    â”œâ”€â”€ calculate_rsi(prices, period)
    â”œâ”€â”€ calculate_macd(prices, fast, slow, signal)
    â”œâ”€â”€ calculate_bollinger_bands(prices, period, std)
    â”œâ”€â”€ calculate_atr(highs, lows, closes, period)
    â”œâ”€â”€ calculate_fibonacci_retracements(high, low)
    â””â”€â”€ get_fibonacci_signal(price, levels)
```

#### Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø±ÛŒØ§Ø¶ÛŒ

**SMA (Simple Moving Average)**
```
SMA = Î£(prices[-period:]) / period
```

**EMA (Exponential Moving Average)**
```
Multiplier = 2 / (period + 1)
EMA_t = price_t * M + EMA_(t-1) * (1 - M)
```

**RSI (Relative Strength Index)**
```
RS = avg_gain / avg_loss
RSI = 100 - (100 / (1 + RS))
```

**MACD**
```
MACD = EMA12 - EMA26
Signal = EMA9(MACD)
Histogram = MACD - Signal
```

**Bollinger Bands**
```
Middle = SMA(20)
Upper = Middle + (2 * StdDev)
Lower = Middle - (2 * StdDev)
```

**ATR (Average True Range)**
```
TR = max(H-L, |H-C_prev|, |L-C_prev|)
ATR = avg(TR[-period:])
```

**Fibonacci**
```
diff = high - low
levels = {
    "0": low,
    "23.6": low + diff * 0.236,
    "38.2": low + diff * 0.382,
    "50": low + diff * 0.5,
    "61.8": low + diff * 0.618,  # Ï† (phi)
    "78.6": low + diff * 0.786,
    "100": high
}
```

### 4. Machine Learning Layer

#### Feature Engineering

```
Total Features: 70+

Category 1: Price Features (10)
â”œâ”€â”€ Close, Open, High, Low
â”œâ”€â”€ Returns (1-day, 5-day, 20-day)
â”œâ”€â”€ High-Low Range
â”œâ”€â”€ Volatility (std dev)
â””â”€â”€ Price Ratios

Category 2: Moving Averages (15)
â”œâ”€â”€ SMA(5,10,20,50)
â”œâ”€â”€ EMA(5,10,20)
â”œâ”€â”€ SMA Crossovers
â”œâ”€â”€ EMA Crossovers
â””â”€â”€ MA Slopes

Category 3: Momentum (20)
â”œâ”€â”€ RSI(14)
â”œâ”€â”€ MACD, MACD Signal
â”œâ”€â”€ Stochastic %K, %D
â”œâ”€â”€ Rate of Change
â”œâ”€â”€ Momentum Divergence
â””â”€â”€ Acceleration

Category 4: Volatility (15)
â”œâ”€â”€ ATR(14)
â”œâ”€â”€ Bollinger Bands Width
â”œâ”€â”€ Bollinger %B
â”œâ”€â”€ Historical Volatility
â”œâ”€â”€ Volatility Ratio
â””â”€â”€ Keltner Channels

Category 5: Pattern Recognition (10)
â”œâ”€â”€ Higher Highs/Lows
â”œâ”€â”€ Support/Resistance Breaks
â”œâ”€â”€ Fibonacci Levels Distance
â”œâ”€â”€ Channel Width
â””â”€â”€ Trend Strength
```

#### ML Models

**Model 1: RandomForest**
```
- Trees: 100
- Max Depth: 15
- Min Samples Split: 5
- Feature Selection: top 25
- Out-of-bag Score
```

**Model 2: XGBoost**
```
- Estimators: 100
- Max Depth: 6
- Learning Rate: 0.1
- Subsample: 0.8
- Colsample: 0.8
- Objective: binary:logistic
```

**Model 3: Ensemble**
```
Ensemble = (RF * 0.4) + (XGBoost * 0.4) + (LR * 0.2)
â”œâ”€â”€ RF: Tree-based
â”œâ”€â”€ XGBoost: Gradient Boost
â””â”€â”€ LR: Linear Regression
```

### 5. Backtesting Engine

#### Strategy Pattern
```python
class BaseStrategy(ABC):
    â”œâ”€â”€ on_candle(candle)
    â”œâ”€â”€ should_buy()
    â”œâ”€â”€ should_sell()
    â””â”€â”€ position_size()

# Implementations:
â”œâ”€â”€ SMACrossoverStrategy
â”œâ”€â”€ RSIStrategy
â”œâ”€â”€ MACDDivergenceStrategy
â”œâ”€â”€ BollingerBreakoutStrategy
â””â”€â”€ MultiIndicatorStrategy
```

#### BacktestEngine
```
Run Flow:
1. Load Historical Data
2. For each candle:
   a. Update indicators
   b. Check strategy signals
   c. Execute trades
   d. Update equity
3. Calculate Metrics
4. Generate Report
```

#### Metrics Calculation

```python
class PerformanceMetrics:
    â”œâ”€â”€ total_return = (final_equity - initial) / initial
    â”œâ”€â”€ win_rate = wins / total_trades
    â”œâ”€â”€ sharpe_ratio = avg_return / std_return * âˆš252
    â”œâ”€â”€ sortino_ratio = avg_return / downside_std * âˆš252
    â”œâ”€â”€ max_drawdown = (peak - trough) / peak
    â”œâ”€â”€ profit_factor = gross_profit / gross_loss
    â”œâ”€â”€ payoff_ratio = avg_win / avg_loss
    â””â”€â”€ cumulative_returns = equity_curve
```

---

## ğŸ¯ Data Flow

### Ø³Ù†Ø§Ø±ÛŒÙˆ: ØªØ­Ù„ÛŒÙ„ Ùˆ ØªØµÙ…ÛŒÙ…â€ŒÚ¯ÛŒØ±ÛŒ

```
1. Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡
   â””â”€â†’ API Call: get_time_series("XAU/USD", "1h", 200)
   â””â”€â†’ Response: 200 OHLCV candles

2. ØªØ­Ù„ÛŒÙ„ Signal Agent
   â”œâ”€â†’ Extract: closes, highs, lows
   â”œâ”€â†’ Calculate: 7 indicators
   â”œâ”€â†’ Generate signal: 0.25
   â””â”€â†’ Confidence: 67%

3. ØªØ­Ù„ÛŒÙ„ ML Agent
   â”œâ”€â†’ Engineer: 70+ features
   â”œâ”€â†’ Select: top 25 features
   â”œâ”€â†’ Predict: 3 models
   â””â”€â†’ Ensemble: prob_up=65%

4. Decision Agent
   â”œâ”€â†’ Weight: 0.4*signal + 0.4*ml + 0.2*risk
   â”œâ”€â†’ Aggregate: 0.52
   â”œâ”€â†’ Threshold: > 0.3 â†’ BUY
   â””â”€â†’ Final: BUY, confidence 70%

5. Action
   â”œâ”€â†’ Execute: BUY order
   â”œâ”€â†’ Position: 1000 shares
   â”œâ”€â†’ Stop Loss: -2%
   â””â”€â†’ Take Profit: +5%
```

---

## ğŸ” Design Patterns Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡

### 1. Strategy Pattern
```python
# Interface
class BaseStrategy(ABC):
    @abstractmethod
    def on_candle(self, candle): pass

# Implementations
class SMACrossover(BaseStrategy):
    def on_candle(self, candle):
        # SMA logic
        pass

class RSIBased(BaseStrategy):
    def on_candle(self, candle):
        # RSI logic
        pass
```

### 2. Factory Pattern
```python
def create_agent(agent_type: str):
    if agent_type == "signal":
        return SignalAgent()
    elif agent_type == "ml":
        return MLAgent()
    elif agent_type == "decision":
        return DecisionAgent()
```

### 3. Observer Pattern
```python
class BacktestEngine:
    def __init__(self):
        self.observers = []
    
    def notify_trade(self, trade):
        for observer in self.observers:
            observer.on_trade(trade)
```

### 4. Context Manager
```python
class TwelveDataClient:
    def __enter__(self):
        return self
    
    def __exit__(self, exc_type, exc_val, exc_tb):
        # Cleanup
        pass
```

### 5. Singleton Pattern
```python
@dataclass
class Settings:
    """Ù…Ø­ÛŒØ·â€ŒÙ‡Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª (ÛŒÚ©ØªØ§)"""
    api_key: str
    symbol: str
    interval: str
```

### 6. Template Method Pattern
```python
class BaseAgent(ABC):
    def analyze(self, data):
        # Template
        if not self.enabled:
            return self._disabled_output()
        
        indicators = self._calculate_indicators(data)
        signal = self._generate_signal(indicators)
        return self._create_output(signal)
    
    @abstractmethod
    def _calculate_indicators(self, data): pass
    
    @abstractmethod
    def _generate_signal(self, indicators): pass
```

---

## ğŸ“Š Class Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              BaseAgent (Abstract)             â”‚
â”‚  â”œâ”€â”€ agent_type: AgentType                   â”‚
â”‚  â”œâ”€â”€ name: str                               â”‚
â”‚  â””â”€â”€ analyze(data) â†’ AgentOutput             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚        â”‚        â”‚         â”‚
    â–¼        â–¼        â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Signal  â”‚ â”‚ ML â”‚ â”‚Decisionâ”‚ â”‚ Risk   â”‚
â”‚Agent   â”‚ â”‚Agentâ”‚ â”‚Agent  â”‚ â”‚Agent   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚        â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚        â”‚
        â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”¬â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
        â”‚          â”‚         â”‚
        â–¼          â–¼         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Meta Agent             â”‚
    â”‚   (Orchestrator)           â”‚
    â”‚  â€¢ Coordinate agents       â”‚
    â”‚  â€¢ Aggregate signals       â”‚
    â”‚  â€¢ Make decisions          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Performance Considerations

### Time Complexity

```
Signal Agent Analysis:
â”œâ”€â”€ SMA calculation: O(n)
â”œâ”€â”€ EMA calculation: O(n)
â”œâ”€â”€ RSI calculation: O(n)
â”œâ”€â”€ MACD calculation: O(n)
â”œâ”€â”€ Bollinger Bands: O(n)
â”œâ”€â”€ ATR calculation: O(n)
â””â”€â”€ Fibonacci: O(1)

Total: O(n) where n = number of candles (200)
Average: 50-100ms per analysis
```

### Space Complexity

```
Signal Agent:
â”œâ”€â”€ Input data: 200 candles Ã— 5 values = 1 KB
â”œâ”€â”€ Indicators cache: 7 Ã— float = 56 bytes
â””â”€â”€ Output: ~500 bytes

Total: ~2 KB per analysis
Memory efficient âœ…
```

### ML Agent

```
Time: 100-500ms (includes feature engineering)
Space: ~10 MB (model file + features)
Bottleneck: Feature engineering & model loading
```

---

## ğŸ” Error Handling

```python
# Validation Errors
class InsufficientDataError(Exception):
    """Ø¯Ø§Ø¯Ù‡ Ù†Ø§Ú©Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„"""
    pass

# API Errors
class APIError(Exception):
    """Ø®Ø·Ø§ÛŒ API"""
    pass

# Model Errors
class ModelPredictionError(Exception):
    """Ø®Ø·Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ"""
    pass
```

---

## ğŸ“ˆ Scalability

### Horizontal Scaling
```
Multiple Symbols:
â”œâ”€â”€ XAU/USD â†’ Agent 1
â”œâ”€â”€ EURUSD â†’ Agent 2
â”œâ”€â”€ USDJPY â†’ Agent 3
â””â”€â”€ Load Balancer
```

### Vertical Scaling
```
More Data:
â”œâ”€â”€ 200 â†’ 500 candles (no perf impact)
â”œâ”€â”€ Add new indicators (linear time)
â””â”€â”€ Multi-processing for ML
```

---

**Ù†ØªÛŒØ¬Ù‡**: Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù‚Ø§Ø¨Ù„ ØªÙˆØ³Ø¹Ù‡ØŒ Ù‚Ø§Ø¨Ù„ Ø§Ø¹ØªÙ…Ø§Ø¯ØŒ Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø³Ø±ÛŒØ¹
